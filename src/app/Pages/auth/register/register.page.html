<ion-header>
  <ion-toolbar>
    <ion-buttons slot="start">

      <ion-back-button slot="start"></ion-back-button>
      <ion-title>Registro</ion-title>
    </ion-buttons>
  </ion-toolbar>
</ion-header>

<ion-content>

  <form [formGroup]="myFormUser" (ngSubmit)="register(myFormUser.value)">
    <ion-card>
      <ion-card-subtitle class="ion-text-center">
        Datos Personales
      </ion-card-subtitle>
      <ion-card-content>
        <ion-row>
          <ion-col size="12">
            <div style="text-align: center;  ">
              <label class="subir" style="--background: none;" (change)="onUpload($event)">
                <label for="file-upload">
                  <ion-icon name="camera" class="cameraIcon"></ion-icon>
                </label>
                <input id="file-upload" type="file" formControlName="foto" style='display: none' />
                <div id="info"></div>
              </label>
              <img [src]="urlImage |async" alt="Select Foto *" [hidden]="myFormUser.get('foto').value==''">

              <input #imageUrlUser type="hidden" [value]="urlImage |async">

            </div>
          </ion-col>
          <ion-col>
            <ion-item lines="full">
              <ion-label position="floating">Nombre *</ion-label>
              <ion-input type="text" class="" required formControlName="nombre"></ion-input>
            </ion-item>
          </ion-col>
          <ion-col>

            <ion-item lines="full">
              <ion-label position="floating">Apellido *</ion-label>
              <ion-input type="text" required formControlName="apellido"></ion-input>
            </ion-item>
          </ion-col>
        </ion-row>
        <ion-item lines="full">
          <ion-label position="floating">Teléfono *</ion-label>
          <ion-input type="number" required formControlName="telefono"></ion-input>
        </ion-item>
      </ion-card-content>
    </ion-card>

    <ion-card>
      <ion-card-subtitle class="ion-text-center">
        Datos de la carrera
      </ion-card-subtitle>
      <ion-card-content>

        <ion-item lines="full">
          <ion-label position="floating">Numero Único *</ion-label>
          <ion-input type="number" required placeholder="Num único  EPN" formControlName="numUnico"></ion-input>
        </ion-item>

        <ion-item lines="full">
          <ion-label position="floating">Carrera *</ion-label>
          <ion-select ok-text="Ok" cancel-text="Cancelar" formControlName="carreraId">
            <div *ngFor="let item of listacarrera">
              <ion-select-option value={{item.id}}>{{item.nombre}}</ion-select-option>
            </div>
          </ion-select>
        </ion-item>

        <ion-item lines="full">
          <ion-label position="floating">Semestre referencial *</ion-label>
          <ion-select required formControlName="semestreRef">
            <ion-select-option value="1">1ro</ion-select-option>
            <ion-select-option value="2">2do</ion-select-option>
            <ion-select-option value="3">3ro</ion-select-option>
            <ion-select-option value="4">4to</ion-select-option>
            <ion-select-option value="5">5to</ion-select-option>
            <ion-select-option value="graduado">Graduado</ion-select-option>
          </ion-select>
        </ion-item>




      </ion-card-content>
    </ion-card>


    <ion-card>
      <ion-card-subtitle class="ion-text-center">
        Datos de ingreso
      </ion-card-subtitle>
      <ion-card-content>
        <ion-item lines="full">
          <ion-label position="floating">Email *</ion-label>
          <ion-input type="email" required formControlName="email"></ion-input>

        </ion-item>
        <small class="alert-danger" *ngIf="emailF.invalid && (emailF.dirty || emailF.touched)">
          <div class="div container-error-message" *ngIf="emailF.errors.required">
            Email es requerido
          </div>
          <div class="div container-error-message" *ngIf="emailF.errors.pattern">
            Ingrese un email EPN valido.
          </div>
        </small>

        <ion-item lines="full">
          <ion-label position="floating">Password *</ion-label>
          <ion-input #input type="password" required formControlName="password"></ion-input>

          <ion-note slot="end">
            <a (click)="mostrarContrasena(input)" name="password-checked">
              <ion-icon [hidden]="!show" name="eye-outline"></ion-icon>
              <ion-icon [hidden]="show" name="eye-off-outline"></ion-icon>
            </a>
          </ion-note>
        </ion-item>

        <small class="alert-danger" *ngIf="passwordF.invalid && (passwordF.dirty || passwordF.touched)">
          <div class="div container-error-message" *ngIf="passwordF.errors.required">
            El password es requerido
          </div>
          <div class="div container-error-message" *ngIf="passwordF.errors?.minlength">
            El password debe tener una longitud de 6 caracteres
          </div>
        </small>
        <br>
        <ion-row>
          <ion-col class="ion-text-center">
            <ion-checkbox color="primary" formControlName="privacidad"></ion-checkbox>
            <a routerLink="/terminos"> Aceptar términos y Condiciones</a>
            <br>
            <br>
            <ion-button type="submit" expand="block" [disabled]="myFormUser.get('privacidad').value==false">Guardar
            </ion-button>
          </ion-col>

        </ion-row>

        <div class="ion-text-center">
          <a routerLink="/login">Iniciar sesión!</a>
        </div>
      </ion-card-content>
    </ion-card>

  </form>

  <br>
  <br><br><br><br>

</ion-content>